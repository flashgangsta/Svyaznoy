package com.svyaznoy {	import com.flashgangsta.utils.PopupsController;	import com.svyaznoy.events.ProviderEvent;	import com.svyaznoy.gui.Button;	import com.svyaznoy.gui.InputTextfield;	import flash.events.MouseEvent;	/**	 * ...	 * @author Sergey Krivtsov (flashgangsta@gmail.com)	 */	public class AddWorkToStoryContest extends AddWorkToContestPopup {				private var title:InputTextfield;		private var message:InputTextfield;		private var submit:Button;				/**		 * 		 * @param	id		 */				public function AddWorkToStoryContest( id:int ) {			this.id = id;						title = getChildByName( "title_mc" ) as InputTextfield;			message = getChildByName( "message_mc" ) as InputTextfield;			submit = getChildByName( "submitButton_mc" ) as Button;						title.title = "название работы (не больше 55 символов)".toUpperCase();			title.maxChars = 55;			title.setErrorMessage( "Введите название работы" );						message.title = "ваш рассказ ".toUpperCase();			message.setErrorMessage( "Введите ваш рассказ" );						submit.setLabel( "добавить работу".toUpperCase() );			submit.addEventListener( MouseEvent.CLICK, onSubmit );			//TODO: сделать dispose		}				/**		 * 		 * @param	event		 */				private function onSubmit( event:MouseEvent ):void {			if ( !title.length ) {				title.showError();				return;			}						if ( !message.length ) {				message.showError();				return;			}						var loader:ProviderURLLoader = Provider.getInstance().addStory( title.text, message.text, id );			loader.addEventListener( ProviderEvent.ON_STORY_ADDED, onAdded );						title.enabled = message.enabled = false;								}				private function onAdded( event:ProviderEvent ):void {			if ( PopupsController.getInstance().getCurrentPopup() === this ) {				PopupsController.getInstance().hidePopup();			}		}			}}